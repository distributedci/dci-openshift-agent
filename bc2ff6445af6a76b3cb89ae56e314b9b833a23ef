{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "a8d08283_8aa2922e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 800
      },
      "writtenOn": "2023-08-01T15:42:44Z",
      "side": 1,
      "message": "Hi guys, adding you here in this change, to see if I can improve something in get-ai-logs script. For the moment, this is the first version and I\u0027m running a debug job with assisted that will fail (I\u0027m causing the failure), and where bootstrap VM will be running in master-0, to see if we can retrieve the logs from there or not",
      "revId": "bc2ff6445af6a76b3cb89ae56e314b9b833a23ef",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d2370a91_956075d7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 908
      },
      "writtenOn": "2023-08-01T18:53:30Z",
      "side": 1,
      "message": "Thanks for starting this Ramon, it would helped me a lot for CILAB-1107, I listed this log issue and other improvements there :)",
      "revId": "bc2ff6445af6a76b3cb89ae56e314b9b833a23ef",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "024ab307_e535cf20",
        "filename": "plays/get-logs.yml",
        "patchSetId": 2
      },
      "lineNbr": 37,
      "author": {
        "id": 908
      },
      "writtenOn": "2023-08-01T18:53:30Z",
      "side": 1,
      "message": "I see this json file contains all the cluster configuration, and it\u0027s not bad, but I just wonder that this block it\u0027s suppose to get logs, not configs, so maybe we should rename the block name? \nOn the other hand, for another conversation, we are not collecting the real install-config.yaml and the agent-install.yaml that are created before the deployment (that needs to be done in crucible because they are consumed when AI generates the ISO but crucible tasks are not making a backup) maybe that\u0027s something we can work on a diff PR and discuss with crucible folks.",
      "revId": "bc2ff6445af6a76b3cb89ae56e314b9b833a23ef",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "447ad491_f42f2d24",
        "filename": "plays/get-logs.yml",
        "patchSetId": 2
      },
      "lineNbr": 37,
      "author": {
        "id": 800
      },
      "writtenOn": "2023-08-02T15:19:41Z",
      "side": 1,
      "message": "Let me change the block name to talk about configs instead of logs, sure.\nAnd regarding the install-configs, I\u0027ll try to include them in my Crucible PR, I will generalize it to talk about logging and config retrieval, probably",
      "parentUuid": "024ab307_e535cf20",
      "revId": "bc2ff6445af6a76b3cb89ae56e314b9b833a23ef",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d3af114e_c08a7d7f",
        "filename": "plays/get-logs.yml",
        "patchSetId": 2
      },
      "lineNbr": 51,
      "author": {
        "id": 908
      },
      "writtenOn": "2023-08-01T18:53:30Z",
      "side": 1,
      "message": "here by default is adding the node names in an array [] separated by quotes, and as you can see in the last job, it used that as server name (example [dciokd-master-0,) so let\u0027s change this line to {{ groups[\u0027nodes\u0027] | join (\u0027 \u0027) }} to add a space between each node instead of a \",\"",
      "revId": "bc2ff6445af6a76b3cb89ae56e314b9b833a23ef",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5c7493ab_d0055f4d",
        "filename": "plays/get-logs.yml",
        "patchSetId": 2
      },
      "lineNbr": 51,
      "author": {
        "id": 800
      },
      "writtenOn": "2023-08-02T15:19:41Z",
      "side": 1,
      "message": "that\u0027s true, I forgot to include that, in fact it\u0027s done in that way with IPI case, let me add it",
      "parentUuid": "d3af114e_c08a7d7f",
      "revId": "bc2ff6445af6a76b3cb89ae56e314b9b833a23ef",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ec6d581c_48360359",
        "filename": "plays/scripts/get-ai-logs",
        "patchSetId": 2
      },
      "lineNbr": 71,
      "author": {
        "id": 908
      },
      "writtenOn": "2023-08-01T18:53:30Z",
      "side": 1,
      "message": "I deployed assisted 4.14 abi and logged in the rendezvous node while deploying, I can see the actual pod names are different than in IP, so we should collect at least: assisted-db, assisted-installer, cluster-bootstrap. There are two others but their names are not very relevant: service and next-step-runner",
      "revId": "bc2ff6445af6a76b3cb89ae56e314b9b833a23ef",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "54e1e4da_64fb9b7c",
        "filename": "plays/scripts/get-ai-logs",
        "patchSetId": 2
      },
      "lineNbr": 71,
      "author": {
        "id": 800
      },
      "writtenOn": "2023-08-02T15:19:41Z",
      "side": 1,
      "message": "But I think we\u0027re doing this in the next for loop. We retrieve all the pods deployed in the rendezvouz node (and among them, we have the ones you\u0027re talking about; in fact, I check at the beginning if assisted-installer pod is running to determine if bootstrap is still present in master-0).\nThis is just to collect service logs, so I think this is fine currently. I\u0027ve verified these two services are in place when running the bootstrap.",
      "parentUuid": "ec6d581c_48360359",
      "revId": "bc2ff6445af6a76b3cb89ae56e314b9b833a23ef",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a20fbd25_dd84e3ca",
        "filename": "plays/scripts/get-ai-logs",
        "patchSetId": 2
      },
      "lineNbr": 80,
      "author": {
        "id": 908
      },
      "writtenOn": "2023-08-01T18:53:30Z",
      "side": 1,
      "message": "Let\u0027s change this message to something like \"No bootstrap logs found in rendezvous node\"",
      "revId": "bc2ff6445af6a76b3cb89ae56e314b9b833a23ef",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2b074c6f_1235a759",
        "filename": "plays/scripts/get-ai-logs",
        "patchSetId": 2
      },
      "lineNbr": 80,
      "author": {
        "id": 800
      },
      "writtenOn": "2023-08-02T15:19:41Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a20fbd25_dd84e3ca",
      "revId": "bc2ff6445af6a76b3cb89ae56e314b9b833a23ef",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0"
    }
  ]
}