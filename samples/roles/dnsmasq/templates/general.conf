no-resolv

local=/{{ domain }}/
domain={{ domain }}

dhcp-authoritative
interface={{ pub_nic }}
bind-interfaces

# PUBLIC DNS
#
server={{ public_dns }}

#static
{% for host in dns_hosts %}
address=/{{ host }}/{{ dns_hosts[host] }}
{% endfor %}

#cluster1 baremetal DHCP range
domain={{ domain }},{{ baremetal_network }}
dhcp-range=set:baremetal,{{ baremetal_range }},2h
dhcp-option=tag:baremetal,option:netmask,{{ baremetal_netmask }}
dhcp-option=tag:baremetal,option:router,{{ baremetal_router }}
dhcp-option=tag:baremetal,option:dns-server,{{ baremetal_dnsserver | default(ansible_host) }}
dhcp-option=tag:baremetal,option:ntp-server,{{ baremetal_ntpserver | default(ansible_host) }}

{% for host in (groups['provisioner'] + groups['masters'] + groups['workers']) | unique %}
dhcp-host={{ hostvars[host].baremetal_mac }},{{ hostvars[host].baremetal_ip }}
{% endfor %}
