{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "a1ae03a7_4ed7fee5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 800
      },
      "writtenOn": "2023-07-10T10:29:56Z",
      "side": 1,
      "message": "LGTM, waiting for a job working fine in disconnected and also taking the pullsecret from a file",
      "revId": "a493861e297b6ae58d71894cf2a77b10bf25ca30",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c1724a5a_bb428f78",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 908
      },
      "writtenOn": "2023-07-11T18:33:53Z",
      "side": 1,
      "message": "Thanks, I\u0027ll keep testing, just apologies for the future spam, there might be lots of failed jobs and not related to this change, now battling with the network variables :/",
      "parentUuid": "a1ae03a7_4ed7fee5",
      "revId": "a493861e297b6ae58d71894cf2a77b10bf25ca30",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7282aeba_2c6a1811",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 648
      },
      "writtenOn": "2023-07-12T16:11:02Z",
      "side": 1,
      "message": "You\u0027re ignoring the pull secret from job_info if you define the pullsecret_file variable as per the `when` condition. This breaks the use case where an operator wants to use a disconnected env + an extra pull secret file for an extra repo say, an internal (online) repo where the tested operators are pushed.\n\nWhat you should do here is 1) load the provided pullsecret_file if defined 2) load the pull secret from job_info 3) clean cloud.openshift.com from job_info.pullsecret 4) merge job_info.pullsecret and pullsecret_file (defaults to {})\n\nThe provided pullsecret_file should remain untouched and should override the duplicated entries from job_info.pullsecret, but it shouldn\u0027t override it completely.",
      "revId": "a493861e297b6ae58d71894cf2a77b10bf25ca30",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4f1b6309_b0e7a0fa",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 648
      },
      "writtenOn": "2023-07-12T16:12:49Z",
      "side": 1,
      "message": "small clarification: I meant to say \"This breaks the use case where an operator wants to use a *connected* env + an extra pull secret file\"",
      "parentUuid": "7282aeba_2c6a1811",
      "revId": "a493861e297b6ae58d71894cf2a77b10bf25ca30",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f4ee8488_402316bf",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 908
      },
      "writtenOn": "2023-08-03T19:21:24Z",
      "side": 1,
      "message": "Hi Jorge, thanks for commenting, and apologies for the delay to answer, but this change as it is now, was allowing me to continue testing other aspects of the deployment, and now that I passed those issues I can finally come here to polish it :)\n\nI see your point about the scenario \"*connected* env + an extra pull secret file\", and I believe that is covered in the CR, in a certain way: that is, when pullsecret_file is undefined, we get the pullsecret from job_info and we merge it with the openshift_secret variable, that variable is expected to be a dictionary with additional auths to be combined. And we do the same if it\u0027s a disconnected env. \n\nOn the other hand, when pullsecret_file is defined, I was expecting that all the required auths should be defined there, so no need to combine with the one from job_info or other extra auths.\n\nCurrently in pre-run of IPI we always get the pull secret from job_info (connected or disconnected) and in different tasks we provide options to combine it with the content of openshift_secret variable, or disconnected_auths variable (which both should contain additional registry auths), but we\u0027ll only use that final pull_secret content when pullsecret_file is undefined; if pullsecret_file is defined we override everything and use whatever that is provided in the file. \n\nI think you recommendation of the 4 steps, will cover almost every possible scenario and leave no room for assumptions, but maybe that\u0027s an improvement we can do in another PR for both assisted and IPI, here I mainly wanted to allow AI installations to use a defined pull_secret file which in our case has all the auths we need for our env.",
      "parentUuid": "4f1b6309_b0e7a0fa",
      "revId": "a493861e297b6ae58d71894cf2a77b10bf25ca30",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "72353ed3_a72660a9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 648
      },
      "writtenOn": "2023-08-15T14:34:51Z",
      "side": 1,
      "message": "My comments will be tracked in https://issues.redhat.com/browse/CILAB-951",
      "revId": "a493861e297b6ae58d71894cf2a77b10bf25ca30",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "66a5f139_5545ef57",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 648
      },
      "writtenOn": "2023-08-15T14:35:17Z",
      "side": 1,
      "message": "https://issues.redhat.com/browse/CILAB-951 for tracking",
      "parentUuid": "f4ee8488_402316bf",
      "revId": "a493861e297b6ae58d71894cf2a77b10bf25ca30",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bea3d40b_05005dc7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 648
      },
      "writtenOn": "2023-08-15T14:56:37Z",
      "side": 1,
      "message": "Just waiting on a successful run to +1 this, Manuel I see the last successful run was testing ABI in Dallas, is that change related to this one?",
      "revId": "a493861e297b6ae58d71894cf2a77b10bf25ca30",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fbf84d4e_c67ba17a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 908
      },
      "writtenOn": "2023-08-15T18:08:37Z",
      "side": 1,
      "message": "Correct, there are a few successful jobs in Dallas, the ones that failed are because of other network configs I\u0027m testing (ipv6, dualstack, dhcp), either way let me launch a new job with ipv4 only to get a successful full run.",
      "parentUuid": "bea3d40b_05005dc7",
      "revId": "a493861e297b6ae58d71894cf2a77b10bf25ca30",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "83994043_5782f611",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 908
      },
      "writtenOn": "2023-08-17T19:23:42Z",
      "side": 1,
      "message": "running an IPI job to make sure this change is not having any impact.\n\ncheck dallas ocp-4.11-vanilla",
      "revId": "a493861e297b6ae58d71894cf2a77b10bf25ca30",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cec8d5f1_f6161730",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 800
      },
      "writtenOn": "2023-08-21T08:18:21Z",
      "side": 1,
      "message": "LGTM, thanks!",
      "revId": "a493861e297b6ae58d71894cf2a77b10bf25ca30",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0"
    }
  ]
}