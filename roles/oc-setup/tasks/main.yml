---
- name: "oc-setup : Install binaries and other packages in jumphost"
  include_tasks: install.yml
  tags:
    - install

- name: "get nodes"
  k8s_info:
    kubeconfig: "{{ dci_cluster_configs_dir }}/kubeconfig"
    api_version: v1
    kind: Node
    field_selectors:
      - status.phase=Ready
  register: nodes
  tags:
    - check

- name: "debug nodes"
  debug:
    msg: "{{ nodes }}"

- name: "test_ oc-setup : Check number of nodes"
  failed_when: "{{ (groups['masters'] + groups['workers'])|length != nodes|length }} "
  tags:
    - check

- name: "oc-setup : Configure clients in jumphost"
  include_tasks: config.yml
  tags:
    - config
...
