---
- name: "Create master cache directory"
  file:
    path: "{{ cache_dir }}"
    state: directory
    owner: "{{ owner }}"
    group: "{{ group }}"
    mode: "0775"
  become: true

- name: "Create cache directory for release"
  file:
    path: "{{ cache_dir }}/{{ version }}"
    owner: "{{ owner }}"
    group: "{{ group }}"
    mode: "0775"
    state: directory
  become: true

- name: "Write pull secret file used for mirroring"
  copy:
    dest: "{{ cache_dir }}/{{ version }}/pull-secret.json"
    content: "{{ pull_secrets | to_nice_json }}"
    owner: "{{ owner }}"
    group: "{{ group }}"
    mode: "0644"
  become: true
...
