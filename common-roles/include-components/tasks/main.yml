---

- include_tasks: track_git_repo.yml
  loop: "{{ dev_gits_to_components }}"

- include_tasks: track_git_repo.yml
  loop: "{{ gits_to_components }}"
  when: |
    item|regex_replace('^(?:.*/(.+)|.*/([^/]+))$', '\\1') is not in
    ( dev_gits_to_components |
    map('regex_replace', '^(?:.*/(.+)|.*/([^/]+))$', '\\1') | list)

- name: Gather the package facts
  package_facts:
    manager: auto

- include_tasks: track_rpm.yml
  loop: "{{ rpms_to_components }}"
  when:
    - item is not in
      ( (gits_to_components + dev_gits_to_components) |
        map('regex_replace', '^(?:.*/(.+)|.*/([^/]+))$', '\\1') |
        map('regex_replace', 'python', 'python3') | list)
    - item in ansible_facts.packages

...
