---
# The issue is with the OLM pod, which is searching for an old CatalogSource.
# The workaround could involve restarting it.
- name: Restart OLM pod catalog-operator
  community.kubernetes.k8s:
    api_version: v1
    kind: Pod
    namespace: openshift-operator-lifecycle-manager
    label_selectors:
      - app=catalog-operator
    state: absent

- name: Wait for OLM pod catalog-operator to be running
  community.kubernetes.k8s_info:
    kind: Pod
    namespace: openshift-operator-lifecycle-manager
    label_selectors:
      - app=catalog-operator
  register: olm_pod
  until: olm_pod | json_query('resources[*].status.phase') | unique == ["Running"]
  retries: 6
  delay: 10
...
