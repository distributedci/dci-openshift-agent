---
- name: "Define opm_mirror_list"
  set_fact:
    opm_mirror_list: []
  when: opm_mirror_list is not defined

- name: "Add operators if dci_prepare_cnf"
  set_fact:
    opm_mirror_list: "{{ opm_mirror_list + cnf_operators }}"
  when:
    - dci_prepare_cnf | bool

- name: "Add operators if enable_cnv"
  set_fact:
    opm_mirror_list: "{{ opm_mirror_list + cnv_operator }}"
  when:
    - enable_cnv | bool

- name: "Add operators if enable_elasticsearch"
  set_fact:
    opm_mirror_list: "{{ opm_mirror_list + elastic_search_operator }}"
  when:
    - enable_elasticsearch | bool

- name: "Add operators if enable_clusterlogging"
  set_fact:
    opm_mirror_list: "{{ opm_mirror_list + cluster_logging_operator }}"
  when:
    - enable_clusterlogging | bool

- name: "Add operators if enable_acm"
  set_fact:
    opm_mirror_list: "{{ opm_mirror_list + advanced_cluster_management }}"
  when:
    - enable_acm | bool

- name: "Add operators if enable_local_storage"
  set_fact:
    opm_mirror_list: "{{ opm_mirror_list + local_storage_operator }}"
  when:
    - enable_localstorage | bool

- name: "Add operators if enable_ocs"
  set_fact:
    opm_mirror_list: "{{ opm_mirror_list + ocs_operator }}"
  when:
    - enable_ocs | bool

- name: "Cleanup operators list"
  set_fact:
    opm_mirror_list: "{{ opm_mirror_list | unique | select | list }}"

- name: "Operators to be mirrored"
  debug:
    msg: "{{ opm_mirror_list }}"
...
