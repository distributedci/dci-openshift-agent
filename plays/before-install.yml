---

- name: "Installer : set EXTERNAL_SUBNET"
  ansible.builtin.set_fact:
    extcidrnet: "{{ ip | ipaddr('network') }}/{{ ip | ipaddr('prefix') }}"
  vars:
    ip: "{{ ansible_default_ipv4.address }}/{{ ansible_default_ipv4.netmask }}"
  when:
    - (extcidrnet is not defined or extcidrnet|length < 1)

- name: "Installer : Get version and build from jumphost vars"
  ansible.builtin.set_fact:
    version: "{{ hostvars.localhost.version }}"
    build: "{{ hostvars.localhost.build }}"

- name: "Installer : Get pullsecret from jumphost vars"
  ansible.builtin.set_fact:
    pullsecret: "{{ hostvars.jumphost.dci_pullsecret | to_json }}"
  no_log: true
...
