---
- name: "Enable gateway mode for 4.7 -> 4.8 upgrade"
  community.kubernetes.k8s:
    definition:
      apiVersion: v1
      kind: ConfigMap
      metadata:
        name: gateway-mode-config
        namespace: openshift-network-operator
      data:
        mode: "local"
      immutable: true
  when:
    - enable_gateway_mode | default(false) | bool

- name: "Deactivate the upgrade of worker nodes - EUS"
  community.kubernetes.k8s:
    definition:
      kind: MachineConfigPool
      metadata:
        name: worker
      spec:
        pause: true
  when:
    - upgrade_eus | default(false) | bool

- name: "Upgrader: Running the Intermediate upgrade - EUS"
  vars:
    target_version: "{{ version_inter }}"
    version_pull_url: "{{ image_inter }}"
  include_tasks: upgrade-process.yml
  when:
    - upgrade_eus | default(false) | bool

- name: "Upgrader: Running the upgrade"
  vars:
    target_version: "{{ version }}"
  include_tasks: upgrade-process.yml

- name: "Reactivate the upgrade of worker nodes - EUS"
  community.kubernetes.k8s:
    definition:
      kind: MachineConfigPool
      metadata:
        name: worker
      spec:
        pause: false
  when:
   - upgrade_eus | default(false) | bool
...
